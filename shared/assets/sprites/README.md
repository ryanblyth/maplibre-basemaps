# Shared Sprite Files

This directory contains shared sprite files (`basemap.json`, `basemap.png`, and `@2x` variants) that contain **only POI icons** (no highway shields).

**Important:** These shared sprites should **NOT** contain highway shields. Shields are theme-specific and belong only in basemap-specific sprite files (`basemaps/{basemap-name}/sprites/`).

## ⚠️ Important: When to Rebuild

**These shared sprite files should NOT be rebuilt during normal development.**

The shared sprite files are:
- Generated by `tools/make-sprites.sh` (requires Docker, creates SDF sprites)
- Or by `npx tsx scripts/rebuild-shared-sprites.ts` (no Docker, creates regular PNG sprites)
- Only needed if you're adding new POI icons to the shared icon library
- **NOT** affected by shield color changes (shields are basemap-specific)

## Basemap-Specific Sprites

Each basemap has its own sprite files in `basemaps/{basemap-name}/sprites/` that include:
- POI icons (from `shared/assets/sprites/icons/`)
- Custom shields (generated from `theme.ts` shield colors)

These basemap-specific sprites are built using:
- `npx tsx scripts/rebuild-sprites.ts <basemap-name>` - Full rebuild
- `npx tsx scripts/build-shields.ts <basemap-name>` - Shields only

## When to Rebuild Shared Sprites

Only rebuild shared sprites if:
1. You've added new POI icon SVG files to `shared/assets/sprites/icons/`
2. You've modified existing POI icon SVG files
3. You need to regenerate the SDF sprites for all basemaps

To rebuild shared sprites:

**Option 1: With Docker (creates SDF sprites for runtime color changes)**
```bash
make sprite
# or
./tools/make-sprites.sh
```

**Option 2: Without Docker (creates regular PNG sprites)**
```bash
npx tsx scripts/rebuild-shared-sprites.ts
```

**Note:** 
- Docker method creates SDF sprites (allows runtime color changes via `icon-color`)
- Node.js method creates regular PNG sprites (colors baked in)

## Shield Changes

If you only changed shield colors in `theme.ts`:
- **DO NOT** rebuild shared sprites
- **DO** rebuild basemap-specific sprites: `npx tsx scripts/build-shields.ts <basemap-name>`

Shield colors are runtime properties that don't require shared sprite regeneration.

